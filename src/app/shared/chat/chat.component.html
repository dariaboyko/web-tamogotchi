<mat-accordion class="chat">
  <mat-expansion-panel
    (opened)="toggleChat(true)"
    (closed)="toggleChat(false)"
    [expanded]="true">
    <mat-expansion-panel-header>
      <mat-panel-title> Chat with {{ petName }} </mat-panel-title>
    </mat-expansion-panel-header>

    <div>
      <div *ngIf="messages.length === 0" class="no-messages">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="86"
          height="86"
          viewBox="0 0 86 86"
          fill="#7b1fa2">
          <mask
            id="mask0_6232_154921"
            style="mask-type: alpha"
            maskUnits="userSpaceOnUse"
            x="18"
            y="19"
            width="49"
            height="49">
            <rect
              x="18.9253"
              y="19.3281"
              width="48"
              height="48"
              fill="#D9D9D9" />
          </mask>
          <g mask="url(#mask0_6232_154921)">
            <path
              d="M53.4253 65.3281C53.0253 65.3281 52.6753 65.1781 52.3753 64.8781C52.0753 64.5781 51.9253 64.2281 51.9253 63.8281C51.9253 63.3948 52.067 63.0365 52.3503 62.7531C52.6336 62.4698 52.992 62.3281 53.4253 62.3281C55.8253 62.3281 57.842 61.5031 59.4753 59.8531C61.1086 58.2031 61.9253 56.1948 61.9253 53.8281C61.9253 53.3948 62.067 53.0365 62.3503 52.7531C62.6336 52.4698 62.992 52.3281 63.4253 52.3281C63.8253 52.3281 64.1753 52.4781 64.4753 52.7781C64.7753 53.0781 64.9253 53.4281 64.9253 53.8281C64.9253 57.0281 63.8003 59.7448 61.5503 61.9781C59.3003 64.2115 56.592 65.3281 53.4253 65.3281ZM22.4253 34.3781C22.0253 34.3781 21.6753 34.2281 21.3753 33.9281C21.0753 33.6281 20.9253 33.2781 20.9253 32.8781C20.9253 29.6781 22.0503 26.9531 24.3003 24.7031C26.5503 22.4531 29.2586 21.3281 32.4253 21.3281C32.8586 21.3281 33.2253 21.4781 33.5253 21.7781C33.8253 22.0781 33.9753 22.4281 33.9753 22.8281C33.9753 23.2615 33.8336 23.6198 33.5503 23.9031C33.267 24.1865 32.9086 24.3281 32.4753 24.3281C30.1086 24.3281 28.092 25.1531 26.4253 26.8031C24.7586 28.4531 23.9253 30.4615 23.9253 32.8281C23.9253 33.2615 23.7836 33.6281 23.5003 33.9281C23.217 34.2281 22.8586 34.3781 22.4253 34.3781ZM28.6753 57.3781C25.642 54.3448 24.117 50.7115 24.1003 46.4781C24.0836 42.2448 25.592 38.6115 28.6253 35.5781L31.9753 32.2281C32.5086 31.6948 33.0003 31.5698 33.4503 31.8531C33.9003 32.1365 34.3086 32.4615 34.6753 32.8281C35.3753 33.5281 35.7336 34.3615 35.7503 35.3281C35.767 36.2948 35.4086 37.1448 34.6753 37.8781L32.3753 40.1781C32.0753 40.4781 31.9253 40.8281 31.9253 41.2281C31.9253 41.6281 32.0753 41.9781 32.3753 42.2781L32.9753 42.9281C33.8753 43.8281 34.3253 44.9198 34.3253 46.2031C34.3253 47.4865 33.8753 48.5781 32.9753 49.4781C32.742 49.7115 32.6253 49.9948 32.6253 50.3281C32.6253 50.6615 32.742 50.9448 32.9753 51.1781C33.2086 51.4115 33.492 51.5281 33.8253 51.5281C34.1586 51.5281 34.442 51.4115 34.6753 51.1781C36.042 49.8115 36.7253 48.1615 36.7253 46.2281C36.7253 44.2948 36.042 42.6448 34.6753 41.2781L36.3253 39.5781C37.0253 38.8781 37.5253 38.0865 37.8253 37.2031C38.1253 36.3198 38.192 35.4615 38.0253 34.6281L46.3753 26.2781C46.6753 25.9781 47.0336 25.8281 47.4503 25.8281C47.867 25.8281 48.2253 25.9781 48.5253 26.2781C48.8253 26.5781 48.9753 26.9365 48.9753 27.3531C48.9753 27.7698 48.8253 28.1281 48.5253 28.4281L37.5753 39.3781L40.6253 42.4281L54.4253 28.6781C54.7253 28.3781 55.0753 28.2281 55.4753 28.2281C55.8753 28.2281 56.2253 28.3781 56.5253 28.6781C56.8253 28.9781 56.9753 29.3281 56.9753 29.7281C56.9753 30.1281 56.8253 30.4781 56.5253 30.7781L42.7753 44.5281L45.8253 47.6281L58.1753 35.2781C58.4753 34.9781 58.8336 34.8281 59.2503 34.8281C59.667 34.8281 60.0253 34.9781 60.3253 35.2781C60.6253 35.5781 60.7753 35.9281 60.7753 36.3281C60.7753 36.7281 60.6253 37.0781 60.3253 37.3781L47.9753 49.7281L51.0253 52.8281L60.4753 43.3781C60.7753 43.0781 61.1336 42.9281 61.5503 42.9281C61.967 42.9281 62.3253 43.0781 62.6253 43.3781C62.9253 43.6781 63.0753 44.0281 63.0753 44.4281C63.0753 44.8281 62.9253 45.1781 62.6253 45.4781L50.5753 57.5281C47.542 60.5615 43.9003 62.0615 39.6503 62.0281C35.4003 61.9948 31.742 60.4448 28.6753 57.3781Z"
              fill="#7b1fa2" />
          </g>
        </svg>
        <div>Send message to start chat</div>
      </div>
      <ul class="messages" *ngIf="messages.length !== 0">
        <ng-container *ngFor="let message of messages">
          <li
            *ngIf="message.sender === EChatSender.User"
            class="message message__user">
            <span class="message__sender">You:</span>
            <span class="message__text">{{ message.message }}</span>
          </li>
          <li
            *ngIf="message.sender === EChatSender.Bot"
            class="message message__bot">
            <span class="message__sender">{{ petName }}:</span>
            <span class="message__text">{{ message.message }}</span>
          </li>
        </ng-container>
        <div id="scroll"></div>
      </ul>
      <div class="input">
        <mat-form-field class="message-input" appearance="outline">
          <input
            matInput
            [(ngModel)]="userMessage"
            (keydown.enter)="sendMessage()"
            placeholder="Type a message..." />
        </mat-form-field>
        <button mat-icon-button color="primary" (click)="sendMessage()">
          <mat-icon>send</mat-icon>
        </button>
      </div>
    </div>
  </mat-expansion-panel>
</mat-accordion>
